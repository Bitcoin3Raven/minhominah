<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/assets/images/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>민호민아닷컴 - 민호와 민아의 성장 앨범</title>
    <meta name="description" content="민호와 민아의 소중한 성장 과정을 기록하는 디지털 앨범" />
    
    <!-- PWA 설정 -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#667eea" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="민호민아" />
    <link rel="apple-touch-icon" href="/assets/images/logo.png" />
    
    <!-- Pretendard 폰트 -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    
    <!-- 확장 프로그램 에러 무시 (매우 가벼운 스크립트) -->
    <script src="/ignore-extension-errors.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Service Worker 캐시 강제 업데이트
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for(let registration of registrations) {
            registration.update();
          }
        });
        
        // 캐시 버전 확인 및 오래된 캐시 삭제
        caches.keys().then(function(names) {
          const currentCacheVersion = 'v3-2025-07-30';
          for (let name of names) {
            if (name.includes('minhominah-') && !name.includes(currentCacheVersion)) {
              console.log('Deleting old cache:', name);
              caches.delete(name);
            }
          }
        });
      }
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
