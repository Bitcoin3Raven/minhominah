# 공유 기능 설정 가이드

## 📤 공유 기능 개요
민호민아 성장앨범의 추억을 외부 사용자와 공유할 수 있는 기능입니다.

### 주요 기능
- SNS 공유 (카카오톡, 페이스북, 트위터)
- 링크 복사로 공유
- 공유 링크 만료 기간 설정
- 패스워드 보호 옵션
- 댓글 표시 여부 설정
- 공유 통계 확인

## 🔧 설정 방법

### 1. 데이터베이스 스키마 적용
```bash
# Supabase SQL Editor에서 실행
database-share-schema.sql
```

### 2. Kakao SDK 설정 (선택사항)
카카오톡 공유를 사용하려면:

1. [Kakao Developers](https://developers.kakao.com/) 접속
2. 애플리케이션 생성
3. JavaScript 키 발급
4. index.html에서 YOUR_KAKAO_JAVASCRIPT_KEY를 실제 키로 교체

```javascript
// index.html 수정
Kakao.init('YOUR_KAKAO_JAVASCRIPT_KEY'); // 실제 키로 교체
```

### 3. Open Graph 이미지 설정
`assets/images/` 폴더에 다음 이미지 추가:
- `og-default.jpg`: 기본 공유 이미지 (1200x630px 권장)

## 🎯 사용 방법

### 1. 추억 공유하기
1. 갤러리에서 추억 카드의 "자세히 보기" 클릭
2. 상세 모달에서 "공유" 버튼 클릭
3. 공유 옵션 선택:
   - SNS로 공유
   - 링크 복사
   - 공유 설정 조정

### 2. 공유 설정
- **만료 기간**: 1일, 7일, 30일, 무제한
- **패스워드 보호**: 선택적 패스워드 설정
- **댓글 표시**: 공유된 페이지에서 댓글 표시 여부

### 3. 공유 링크 접속
- 공유 링크: `https://minhominah.com/share.html?code=XXXXXXXX`
- 패스워드가 설정된 경우 입력 필요
- 만료된 링크는 접속 불가

## 🔒 보안 고려사항

### RLS 정책
- 가족 구성원만 공유 링크 생성 가능
- 자신이 생성한 공유 링크만 수정/삭제 가능
- 활성화된 공유 링크는 누구나 조회 가능

### 공유 제한
- 부모/가족 권한이 있는 사용자만 공유 가능
- 만료 시간 설정으로 무분별한 공유 방지
- 패스워드 보호로 추가 보안

## 📊 공유 통계
- 공유 링크별 조회수 확인
- 접속자 정보 (IP, User Agent)
- 접속 시간 기록

## 🛠️ 문제 해결

### 공유가 안 되는 경우
1. 사용자 권한 확인 (부모/가족 권한 필요)
2. 데이터베이스 스키마 적용 확인
3. Supabase RLS 정책 확인

### 카카오톡 공유 오류
1. Kakao JavaScript 키 확인
2. 도메인 등록 확인 (Kakao Developers)
3. 콘솔 에러 메시지 확인

## 📝 추가 개발 예정
- [ ] QR 코드 생성
- [ ] 이메일로 공유
- [ ] 공유 링크 관리 페이지
- [ ] 상세 통계 대시보드
