# 민호와 민아 프로젝트 계획

## 프로젝트 개요
- **프로젝트명**: 민호와 민아의 소중한 순간들
- **기술 스택**: React, TypeScript, Tailwind CSS, Supabase
- **다국어 지원**: 한국어, 태국어, 영어

## 완료된 작업
- ✅ React 개발 환경 구축
- ✅ 디자인 시스템 문서화
- ✅ 기존 스타일 마이그레이션
- ✅ 다국어 지원 시스템
- ✅ 메모리 갤러리 나이별 필터 및 슬라이드쇼
- ✅ 메모리 갤러리 인물 필터 중복 문제 해결
- ✅ 페이지별 레이아웃 최적화 (포토북, 통계, 성장기록)

### 문서화된 내용
- `/docs/DESIGN_SYSTEM.md`: 디자인 시스템 가이드
- `/docs/DESIGN_MIGRATION_GUIDE.md`: 디자인 마이그레이션 가이드
- `/docs/CHILDREN_INFO.md`: 민호와 민아 정보 및 나이별 필터 시스템

## 진행 중인 작업
### 🎨 다크모드 개선 (2025-01-17)
- [x] 단계 1: DarkModeContext 생성
- [x] 단계 2: CSS 변수 기반 색상 시스템 구축
- [x] 단계 3: HomePage 다크모드 스타일 적용
- [ ] 단계 4: 다른 페이지들 다크모드 적용
  - [ ] MemoriesPage
  - [x] UploadPage (이미 잘 적용되어 있음)
  - [ ] GrowthPage
  - [ ] StatisticsPage
  - [ ] AlbumsPage
  - [x] PhotobookCreatorPage
  - [ ] ProfilePage
  - [ ] LoginPage
- [ ] 단계 5: 컴포넌트별 다크모드 최적화
  - [ ] 모달 컴포넌트
  - [ ] 드롭다운 메뉴
  - [ ] 차트 및 그래프
  - [ ] 폼 요소들

### 🚀 기능 구현 (2025-01-17)
- [x] AlbumsPage 앨범 생성 기능 구현
  - [x] 앨범 생성 모달 UI 개발
  - [x] Supabase albums 테이블 생성 SQL 작성
  - [x] 앨범 CRUD API 연동
  - [x] 다국어 지원 추가 (한국어, 영어, 태국어)
- [x] GrowthPage 색상 개선
  - [x] 통계 카드를 파스텔톤으로 변경
  - [x] 전체적인 색감 조정
  - [x] 다크모드 대응 색상 추가

## 완료된 작업
### ✅ UI/UX 개선 작업 (2025-01-16)
- [x] 로그인 버튼 심플하게 개선
- [x] 언어 변환기 국기 이미지 적용 및 디자인 개선

## 진행 중인 작업
### 🎯 앨범 기능 완성 (2025-01-21) ✅
- [x] 단계 1: 앨범 상세 페이지 개발 ✅
  - [x] /albums/:id 라우트 추가
  - [x] 앨범에 속한 메모리 목록 표시
  - [x] 앨범 정보 수정 기능
  - [x] 앨범 삭제 기능
  - [x] 앨범에서 메모리 제거 기능
  - [x] 번역 키 추가 (한국어, 영어, 태국어)
- [x] 단계 2: 메모리를 앨범에 추가하는 기능 ✅
  - [x] 메모리 상세 페이지에 "앨범에 추가" 버튼
  - [x] 앨범 선택 모달 개발 (AddToAlbumModal.tsx)
  - [x] album_memories 테이블에 데이터 저장
  - [x] 번역 키 추가 (addToAlbum, selectAlbums, updateError)
- [x] 단계 3: 업로드 시 앨범 선택 ✅
  - [x] UploadPage에 앨범 선택 UI 추가 (실제로는 이미 구현되어 있었음)
  - [x] 다중 앨범 선택 가능
  - [x] 앨범 연결 로직 구현 (album_memories 테이블)
  - [x] 편집 모드에서 기존 앨범 연결 삭제 로직
  - [x] 번역 키 추가 완료 (upload_album_label: 한국어, 영어, 태국어)
- [x] 단계 4: 앨범 관리 기능 (대부분 완료)
  - [x] 앨범에서 메모리 제거 (AlbumDetailPage에 이미 구현됨)
  - [x] 앨범 커버 이미지 설정 ✅
    - [x] AlbumDetailPage에 커버 이미지 설정 버튼 추가
    - [x] setCoverImageMutation 구현
    - [x] 앨범 헤더에 커버 이미지 표시
    - [x] AlbumsPage에서 커버 이미지 표시
    - [x] 번역 키 추가 (albums.setCover)
  - [ ] 앨범 순서 변경 (드래그 앤 드롭) - 추후 구현 예정

## 예정된 작업
- [x] 메모리 갤러리 페이지 - 나이별 필터와 슬라이드쇼 기능 추가
- [ ] 사진/동영상 업로드 기능
- [ ] Supabase 백엔드 연동
- [ ] 인증 시스템
- [ ] 배포

## 작업 로그
### 2025-01-21 (오늘)
- **태국어 로그인 버튼 폰트 크기 조정** ✅ (2025-01-21)
  - 문제: 태국어 버전에서 긴 텍스트로 인해 햄버거 메뉴가 오른쪽으로 밀려 짤림
  - 해결:
    - [x] useLanguage에서 language 값도 가져오도록 수정
    - [x] 로그인 버튼에 언어별 조건부 폰트 크기 적용
    - [x] 태국어일 때: text-xs 클래스 적용 (작은 폰트)
    - [x] 다른 언어일 때: text-sm 클래스 적용 (기본 폰트)
  - 결과: 태국어 버전에서도 햄버거 메뉴가 정상적으로 표시됨
  - 수정 파일: Layout.tsx
- **홈페이지 장식 원 투명도 개선** ✅ (2025-01-21)
  - 문제: 모바일에서 분홍색과 하늘색 원이 너무 진해서 글자를 가림
  - 해결:
    - [x] 분홍색 원의 투명도를 70% → 40%로 낮춤
    - [x] 파란색 원의 투명도를 70% → 40%로 낮춤
    - [x] 다크모드에서도 투명도를 30% → 20%로 낮춤
    - [x] 보라색 원과 동일한 수준의 연한 색상으로 통일
  - 결과: 모바일과 데스크탑 모두에서 텍스트 가독성 향상
  - 수정 파일: HomePage.tsx
- **모바일 네비게이션 공간 문제 해결** ✅ (2025-01-21)
  - 문제: 로그인 텍스트가 길어질 때 (예: 태국어 "เข้าสู่ระบบ") 로고가 줄어드는 현상
  - 해결:
    - [x] 로고에 flex-shrink-0 클래스 추가로 크기 고정
    - [x] 오른쪽 메뉴 섹션에 flex-shrink와 min-w-0 추가
    - [x] 프로필 아이콘을 모바일에서 숨김 (hidden md:block)
    - [x] 로그인 버튼에 whitespace-nowrap 추가로 줄바꿈 방지
  - 결과: 
    - 모바일에서 로고 크기가 보호됨
    - 프로필 아이콘은 데스크톱에서만 표시
    - 햄버거 메뉴 안에 프로필 링크 유지
- **여러 페이지 상단 여백 추가** ✅ (2025-01-21)
  - 문제: 여러 페이지에서 상단 공간이 부족함
  - 해결: pt-8 클래스 추가로 일관된 상단 여백 확보
  - 적용된 페이지:
    - [x] TrashPage
    - [x] ActivityLogPage
    - [x] AdminPage
    - [x] InvitePage
    - [x] AlbumsPage
    - [x] MemoriesPage
- **프로필 페이지 상단 여백 추가** ✅ (2025-01-21)
  - 문제: /profile 페이지 상단 공간이 없어짐
  - 해결: pt-8 클래스 추가로 상단 여백 확보
- **홈페이지 다크모드 색상 개선** ✅ (2025-01-21)
  - 사용자 요청: 다크모드에서만 색상 개선
  - 개선사항:
    - [x] 네비게이션바 다크모드에 파란 계열 색상 적용
      - 라이트모드: 원래대로 유지 (흰색 배경)
      - 다크모드: 슬레이트/블루 그라데이션 배경
      - 드롭다운 메뉴도 다크모드에서만 파란 계열
    - [x] 메인 컨텐츠 영역 다크모드 개선
      - 통계 섹션: 다크모드에서 어두운 그레이 그라데이션
      - 통계 카드: 다크모드에서 반투명 어두운 회색
      - 우리 아이들 섹션: 다크모드에서 어두운 배경
      - 최근 추억 섹션: 다크모드에서 어두운 배경
    - [x] 전체적인 다크모드 색상 통일감 개선
- **앨범 기능 완성** ✅ (2025-01-21)
  - 중단된 작업을 이어서 진행
  - 단계 3: 업로드 시 앨범 선택 기능
    - 실제로는 이미 대부분 구현되어 있었음을 발견
    - 번역 키만 누락되어 있어서 추가 (upload_album_label)
  - 단계 4: 앨범 관리 기능
    - 앨범에서 메모리 제거: 이미 구현되어 있음
    - 앨범 커버 이미지 설정 기능 구현
      - AlbumDetailPage에 setCoverImageMutation 추가
      - 각 메모리에 "커버로 설정" 버튼 추가
      - 앨범 헤더에 커버 이미지 표시
      - AlbumsPage의 앨범 카드에 커버 이미지 표시
      - 번역 키 추가 (albums.setCover)
    - 앨범 순서 변경 (드래그 앤 드롭): 추후 구현 예정
  - 결과: 앨범 기능의 핵심 기능들이 모두 완성됨
  - **JSX 구조 오류 수정**: AlbumDetailPage.tsx에서 div 태그가 제대로 닫히지 않은 문제 해결
- **앨범 기능 406 에러 수정** ✅ (2025-01-21)
  - 문제: 앨범 수정/삭제 시 406 (Not Acceptable) 에러 발생
  - 원인: cover_image_id 외래 키 관계가 Supabase에서 제대로 설정되지 않음
  - 해결:
    - AlbumDetailPage와 AlbumsPage에서 cover_image 관계 쿼리 제거
    - 커버 이미지를 별도 쿼리로 가져오도록 수정
    - 임시로 AlbumsPage에서 커버 이미지 표시 제거
    - database-fix-album-cover-foreign-key.sql 파일 생성
  - 필요 작업: Supabase에서 외래 키 관계 설정 SQL 실행
- **홈페이지 "우리 아이들" 섹션 디자인 확인** ✅ (2025-01-21)
  - 질문: 민호/미나 카드의 파란색/핑크색 부분은 사진이 들어가야 하는지?
  - 현재 상태:
    - HomePage.tsx 249번줄: 민호 카드 - 파란색 그라데이션 배경
    - HomePage.tsx 270번줄: 미나 카드 - 핑크색 그라데이션 배경
    - 디자인 요소로 사용 중 (사진 필요 없음)
  - 사진 추가 시:
    - 위치: `/public/assets/images/` 폴더
    - 파일명: `minho.jpg`, `mina.jpg` 등
    - 코드 수정 필요 (그라데이션 div를 img 태그로 변경)
- **앨범 기능 현황 및 의도 파악** ✅ (2025-01-21)
  - 질문: 앨범은 어디서 활용하는지, 사진 업로드 시 앨범을 선택하는지?
  - 현재 구현 상태:
    - AlbumsPage.tsx: 앨범 생성 기능만 구현됨
    - albums 테이블: 앨범 정보 저장
    - album_memories 테이블: 앨범-메모리 연결용 (미사용)
  - 원래 의도:
    - 메모리(사진)를 앨범으로 그룹화하는 기능
    - 등록된 사진을 나중에 앨범에 추가하는 방식
    - 하나의 메모리가 여러 앨범에 속할 수 있음
  - 미구현 기능:
    - 업로드 시 앨범 선택 ❌
    - 기존 메모리를 앨범에 추가 ❌ 
    - 앨범 상세 페이지 ❌
    - 앨범별 메모리 보기 ❌
  - 결론: 현재는 앨범 생성만 가능하고 실제 활용은 불가능한 상태
- **홈페이지 최근 추억 썸네일 표시 수정** ✅ (2025-01-21)
  - 문제: 최근 추억 섹션에서 카메라 아이콘만 나오고 실제 썸네일이 표시되지 않음
  - 원인: 미디어 파일을 조인하지 않고 단순히 아이콘만 표시하도록 하드코딩됨
  - 해결:
    - 최근 추억 쿼리에 media_files 조인 추가
    - getMediaUrl 함수 추가로 Supabase Storage URL 생성
    - 실제 썸네일 이미지 표시 로직 구현
    - 이미지 로드 실패 시 카메라 아이콘 표시
    - TypeScript 타입 정의 추가 (MediaFile, Memory, Stats)
  - 수정 파일: HomePage.tsx
- **JSX 문법 에러 수정** ✅ (2025-01-21)
  - 문제: localhost:3000에서 "The character '>' is not valid inside a JSX element" 에러 발생
  - 원인: Layout.tsx 파일에서 닫는 태그 `>`가 중복으로 작성됨
  - 해결: 166번, 205번 줄의 중복된 `>` 태그 제거
  - 수정 파일: Layout.tsx
- **메모리 상세페이지 성능 개선** 🔧 (2025-01-21)
  - 문제: /memories/:id 페이지 로딩이 느리고 간헐적 404 에러 발생
  - 원인 분석:
    - 복잡한 join 쿼리로 인한 성능 저하
    - React Query 캐시 시간이 짧아 재요청 빈발
    - 이미지 로딩 최적화 부족
    - 에러 핸들링 미흡
  - 해결:
    - React Query 캐시 시간 연장 (5분→10분, GC 10분→30분)
    - 재시도 로직 추가 (3회, 지수 백오프)
    - 이미지 lazy loading 및 에러 핸들링 추가
    - 에러 UI 개선 및 번역 추가
    - 데이터베이스 인덱스 추가 SQL 생성
  - 수정 파일:
    - App.tsx (React Query 설정)
    - MemoryDetailPage.tsx (에러 핸들링, 이미지 최적화)
    - ko.ts, en.ts, th.ts (번역 추가)
  - 생성 파일:
    - database-improve-memory-detail-performance.sql
    - docs/FIX_MEMORY_DETAIL_PERFORMANCE.md
  - **필요 작업**: Supabase에서 인덱스 생성 SQL 실행
- **다크모드 네비게이션 개선** ✅ (2025-01-21)
  - 문제: 다크모드에서 상단 네비게이션과 메인 컨텐츠 간 색상 구분이 어려움
  - 해결: 
    - 네비게이션 바 투명도 조정 (90% → 95%)
    - 다크모드 전용 하단 테두리 추가 (dark:border-b dark:border-gray-800)
    - 메인 컨텐츠 배경에 그라데이션 효과 추가 (dark:from-gray-900 dark:to-background-dark)
    - 드롭다운 메뉴 배경 투명도 조정 및 그림자 강화 (dark:shadow-xl)
    - 모바일 메뉴 배경색 일관성 개선
    - 하드코딩 없이 Tailwind 클래스만으로 해결
  - 수정 파일: Layout.tsx
  - 문제: "duplicate key value violates unique constraint" 에러 발생
  - 원인: 편집 모드에서 기존 태그/인물 삭제 후 같은 것을 다시 추가할 때 중복 발생
  - 해결:
    - insert 대신 upsert 사용으로 변경
    - onConflict와 ignoreDuplicates 옵션 추가
    - 기존 연결 삭제 시 에러 처리 추가
  - 수정 파일: UploadPage.tsx
- **메모리 수정 시 기존 태그/인물 미표시 문제 해결** ✅
  - 문제: 편집 모드에서 기존에 등록한 태그와 인물이 화면에 표시되지 않음
  - 원인: react-hook-form의 setValue가 UI에 제대로 반영되지 않음
  - 해결:
    - reset 함수를 사용하여 폼 전체를 한번에 업데이트
    - 편집 데이터 로드 시 people과 tags 데이터가 모두 로드된 후 실행하도록 의존성 추가
  - 수정 파일: UploadPage.tsx
- **메모리 수정 시 태그/인물 null 에러 해결** 🔧
  - 문제: "null value in column 'tag_id' violates not-null constraint" 에러
  - 원인: 
    - 태그/인물 배열에 빈 문자열('')이 포함되어 있을 가능성
    - memory_tags 테이블의 RLS 정책이 upsert 작업과 충돌
  - 해결:
    - null, undefined뿐만 아니라 빈 문자열도 필터링하도록 수정
    - database-fix-memory-tags-rls-v2.sql 파일 생성
    - FIX_MEMORY_TAGS_NULL_ERROR.md 가이드 문서 생성
  - 필요 작업: Supabase에서 RLS 정책 수정 SQL 실행
- **memory_people RLS 정책 에러 긴급 수정** 🚨
  - 문제: "new row violates row-level security policy for table 'memory_people'" 에러
  - 원인: memory_people 테이블의 RLS 정책이 너무 복잡하여 upsert 작업 실패
  - 해결:
    - database-emergency-fix-rls.sql 파일 생성
    - 모든 인증된 사용자가 접근 가능한 간단한 정책으로 변경
    - memory_people, memory_tags 모두 동일하게 적용
  - 필요 작업: **즉시 Supabase에서 긴급 RLS 정책 SQL 실행 필요**
- **메모리 수정 시 person_id NULL 에러 해결** ✅
  - 문제: "null value in column 'person_id' violates not-null constraint" 에러
  - 원인: 인물/태그 연결 시 배열에 null/undefined 값이 포함됨
  - 해결:
    - 인물/태그 연결 시 null/undefined 값 필터링 추가
    - 편집 모드에서 created_by로 권한 체크 변경
    - 편집 모드에서 기존 데이터 로드 시 null 값 필터링
  - 수정 파일: UploadPage.tsx
- **user_id와 created_by 필드 중복 문제 정리** ✅
  - 문제: memories 테이블에 user_id와 created_by 두 개의 필드가 중복으로 존재
  - 원인: 초기 스키마(created_by) + 나중에 추가된 필드(user_id)
  - 해결:
    - UploadPage.tsx 수정: user_id 제거하고 created_by만 사용
    - 메모리 생성/수정 시 created_by 필드만 사용하도록 통일
    - database-cleanup-user-id-created-by.sql 파일 생성
  - 권장: created_by 필드만 사용 (원래 스키마 유지)
  - 필요 작업: Supabase에서 데이터 정리 SQL 실행
- **인증 토큰 에러 발생** 🔧
  - 문제: "Error: No authorization token was found" 에러 발생
  - 원인: 세션 만료, 쿠키/로컬 스토리지 문제, JWT 토큰 만료 등
  - 해결 방법:
    - FIX_AUTH_TOKEN_ERROR.md 가이드 문서 생성
    - 로그아웃 후 재로그인
    - 브라우저 캐시 및 쿠키 클리어
    - 시크릿 모드로 시도
  - 장기적 해결: Supabase JWT 만료 시간 연장 고려
- **썸네일 경로 400 에러 문제 해결** ✅
  - 문제: 메모리 페이지에서 썸네일 이미지 로드 시 400 Bad Request 에러
  - 원인: 썸네일 경로는 생성하지만 실제 썸네일 파일은 업로드하지 않음
    - thumbnail_path가 'thumbnails/...' 형태로 저장되지만 실제 파일 없음
  - 해결:
    - UploadPage.tsx 수정: 썸네일 경로를 원본 이미지 경로로 설정
    - database-fix-thumbnail-paths.sql 파일 생성
    - 기존 데이터의 잘못된 썸네일 경로를 원본 경로로 변경하는 SQL 작성
  - 필요 작업: Supabase에서 썸네일 경로 수정 SQL 실행
- **메모리 업로드 RLS 정책 오류 해결** 🔧
  - 문제: "new row violates row-level security policy for table 'memory_people'" 에러
  - 원인: memory_people, memory_tags 테이블의 RLS 정책이 너무 엄격함
  - 해결:
    - database-fix-memory-people-rls.sql 파일 생성
    - database-fix-memory-connections-rls.sql 파일 생성 (통합 수정)
    - 인증된 사용자가 자신의 메모리에 인물/태그 연결 가능하도록 정책 수정
  - 필요 작업: Supabase에서 RLS 정책 수정 SQL 실행
- **메모리 수정/삭제 버튼 표시 문제 해결** ✅
  - 문제: 본인이 등록한 메모리에서도 수정/삭제 버튼이 보이지 않음
  - 원인: user_id와 created_by 필드 불일치
    - 메모리 생성 시 user_id만 설정되고 created_by는 NULL
    - 권한 체크는 created_by로 하고 있어 불일치 발생
  - 해결:
    - UploadPage.tsx 수정: 메모리 생성 시 created_by 필드도 함께 설정
    - database-fix-memories-created-by.sql 파일 생성
    - FIX_MEMORY_EDIT_DELETE_BUTTON.md 가이드 문서 생성
  - 필요 작업: Supabase에서 기존 데이터의 created_by 필드 업데이트 SQL 실행
- **메모리 상세 페이지 수정/삭제 기능 추가** ✅ (이전 작업)
  - 메모리 상세 페이지에서도 수정/삭제 가능하도록 개선
  - 상세 페이지 우측 상단에 점점점(더보기) 메뉴 추가
  - 메모리 목록 페이지와 동일한 권한 체크 로직 적용 (created_by 필드 사용)
  - 삭제 확인 모달 구현 (목록 페이지와 동일한 UI/UX)
  - 다국어 지원 완료 (memories.share, memories.download, memories.comments 키 추가)
  - 수정 버튼 클릭 시 /upload?edit={id} 페이지로 이동
  - 삭제 성공 시 /memories 페이지로 리디렉션

### 2025-01-16
- 프로젝트 계획 문서 생성
- 다국어 지원 시스템 구현 완료
  - 한국어, 태국어, 영어 3개 언어 지원
  - Context API 기반 언어 관리 시스템
  - 깔끔한 드롭다운 방식의 언어 선택기
  - 모든 컴포넌트에서 useLanguage 훅으로 번역 사용 가능
- 메뉴 구성 복원
  - 백업 폴더 참조로 인해 추가되었던 메뉴 제거 (family-settings, share, backup)
  - 원래 메뉴 구성으로 복원
- 메모리 갤러리 페이지 기능 추가
  - 나이별 필터 (0세~20세) 추가
  - 민호와 민아의 현재 나이 자동 표시 (이모지 포함)
  - 민호 나이: 파란색 테두리/배경색과 👦 이모지
  - 민아 나이: 분홍색 테두리/배경색과 👧 이모지
  - 슬라이드쇼 기능 추가 (3초 자동 재생)
  - 슬라이드쇼 네비게이션 및 인디케이터 추가
  - 민호/민아 생년월일 설정
    - 민호: 2018년 3월 18일생
    - 민아: 2019년 8월 3일생
- 빌드 및 배포 설정
  - TypeScript 타입 에러 수정
  - memory.ts 타입 정의 파일 생성
  - Vercel 배포 설정 수정 (React 앱 지원)
- UI/UX 개선
  - 로그인/로그아웃 버튼을 심플한 텍스트 스타일로 변경
  - 언어 선택기를 국기 이미지(SVG)로 변경
  - 테두리 제거하고 미니멀한 디자인 적용
  - 국기 이미지 경로:
    - 한국어: /assets/images/flags/ko.svg
    - 태국어: /assets/images/flags/th.svg
    - 영어: /assets/images/flags/en.svg
  - 사용자 피드백 반영:
    - 로그인 버튼을 원래의 그라데이션 스타일로 복원
    - 언어 선택기 드롭다운 메뉴 너비 확장 (min-w-[120px])
    - whitespace-nowrap 적용으로 텍스트 줄바꿈 방지

### 2025-01-17
- 메모리 갤러리 페이지 버그 수정
  - 인물 필터 중복 표시 문제 해결
  - 하드코딩된 민호/민아 옵션 제거
  - DB에서 가져온 people 데이터만 사용하도록 수정
  - /memories 페이지의 인물 필터가 이제 정확히 등록된 2개의 인물만 표시
- 레이아웃 개선 작업
  - 포토북 만들기 페이지: 타이틀 수직 중앙 정렬
    - Hero Section에 flexbox 적용 및 padding 조정

### 2025-01-16 (오늘)
- PhotobookCreatorPage 스타일 개선
  - UploadPage와 동일한 깔끔한 디자인 적용
  - Hero Section 추가 (그라데이션 배경)
  - 카드 레이아웃으로 재구성
  - 모든 옵션을 시각적으로 개선
  - 템플릿 프리뷰 추가
  - 다크모드 완벽 지원
  - Hero Section 그라데이션을 UploadPage와 동일하게 통일 (#667eea → #764ba2)
- HomePage 다크모드 텍스트 색상 수정
  - "민호와 민아의" 텍스트를 다크모드에서 흰색으로 변경
  - inline style로 확실한 색상 적용
  - 다크모드에서 연한 핑크-블루 그라데이션으로 자연스럽게 개선
- 다크모드 전환 깜빡임 수정
  - 모든 요소에 적용된 transition을 선택적으로 변경
  - 그라데이션 텍스트는 transition 제외
  - 라이트/다크 모드에서 별도 요소로 렌더링하여 부드러운 전환
- 추억 삭제 기능 버그 수정
  - 삭제 쿼리에 user_id 조건 추가
  - created_by 대신 user_id로 권한 체크
  - 본인이 만든 추억만 삭제 가능하도록 수정
    - minHeight 추가로 적절한 높이 확보
  - 통계 페이지: 좌우 여백 추가
    - max-w-7xl mx-auto 클래스로 적절한 너비 제한
    - /memories 페이지와 동일한 레이아웃 일관성 확보
    - pt-8 추가로 상단 여백 개선
  - 성장 기록 페이지: 히어로 섹션 제외 컨텐츠에 좌우 여백 추가
    - 히어로 섹션은 전체 너비 유지
    - 인물 선택 버튼부터 시작되는 모든 컨텐츠에 container 적용
    - max-w-7xl mx-auto px-4로 적절한 여백 설정
- 백업 페이지 마이그레이션
  - backup.html을 React 컴포넌트로 완전 마이그레이션
  - Backup.tsx 컴포넌트 생성
    - 전체 백업, 추억 백업, 설정 백업 기능 UI 구현
    - 백업 복원 기능 (드래그 앤 드롭 지원)
    - 자동 백업 설정 UI
    - 백업 기록 표시 영역
  - 번역 시스템 통합
    - 한국어, 영어, 태국어 번역 추가
    - 모든 UI 텍스트 다국어 지원
  - 라우팅 설정
    - /backup 라우트 추가
    - PrivateRoute로 인증 필요 설정
  - 네비게이션 개선
    - "가족" 메뉴를 "가족설정"으로 변경
    - 가족설정 드롭다운에 백업 메뉴 추가
    - FiDatabase 아이콘 적용
- MemoriesPage 번역 작업 완료 (2025-01-17)
  - 모든 하드코딩된 텍스트를 번역 키로 변경
  - 페이지 제목, 버튼, 필터, 검색, 모달 등 모든 텍스트 번역
  - 에러 메시지 및 로딩 상태 텍스트 번역
  - 나이 표시 (세), 사진 개수 표시 등 동적 텍스트 번역
- ActivityLogPage 번역 작업 완료 (2025-01-17)
  - 모든 하드코딩된 텍스트를 번역 키로 변경
  - 페이지 제목, 필터 옵션, 내보내기 버튼 번역
  - 활동 없음 메시지 및 설명 번역
  - 각 활동 유형별 메시지 번역 (생성, 수정, 삭제, 복원, 공유, 다운로드)
- TrashPage 번역 작업 완료 (2025-01-17)
  - 모든 하드코딩된 텍스트를 번역 키로 변경
  - 페이지 제목, 자동 삭제 안내 메시지 번역
  - 선택 관련 버튼 및 카운터 번역
  - 복원/영구 삭제 버튼 번역
  - 빈 휴지통 메시지 번역
  - 삭제일 및 영구 삭제 예정일 표시 번역
- ProfilePage 번역 작업 완료 (2025-01-17)
  - 모든 하드코딩된 텍스트를 번역 키로 변경
  - 페이지 제목, 에러/성공 메시지 번역
  - 폼 레이블 및 placeholder 번역
  - 역할 배지 및 설명 번역
  - 버튼 텍스트 번역
  - 계정 정보 섹션 번역

### 번역 시스템 연동 완료 (2025-01-17)
- 모든 주요 페이지에 번역 시스템 적용 완료:
  - MemoriesPage ✓
  - GrowthPage ✓ (이미 적용되어 있었음)
  - StatisticsPage ✓
  - AlbumsPage ✓
  - PhotobookCreatorPage ✓
  - ActivityLogPage ✓
  - UploadPage ✓ (일부 추가 번역 키 적용)
  - TrashPage ✓
  - ProfilePage ✓
  - HomePage ✓ (이미 적용되어 있었음)
- 한국어, 영어, 태국어 3개 언어 지원
- 모든 UI 텍스트가 다국어 지원됨

### 2025-01-17 (오늘)
- **AlbumsPage 앨범 생성 기능 구현** ✅
  - 앨범 생성 모달 UI 개발
    - 앨범 이름, 설명, 공개 여부 설정 폼 구현
    - 애니메이션 효과가 적용된 모달 컴포넌트
  - Supabase 연동
    - albums 테이블 생성 SQL 파일 작성 (`database-create-albums-table.sql`)
    - album_memories 연결 테이블 포함
    - RLS 정책 설정 (공개/비공개 앨범 권한 관리)
  - React Query를 사용한 API 연동
    - 앨범 목록 조회 쿼리
    - 앨범 생성 mutation
    - 앨범별 메모리 개수 표시
  - 다국어 지원 추가
    - 한국어, 영어, 태국어 번역 키 추가
    - 모달 UI의 모든 텍스트 번역 지원
- **GrowthPage 색상 개선** ✅
  - 강한 색상에서 파스텔톤으로 전체 색감 변경
  - 통계 카드 색상 개선
    - 현재 상태: 보라색-핑크 파스텔 그라데이션
    - 최근 성장률: 파란색-청록색 파스텔 그라데이션  
    - 마지막 기록: 초록색-에메랄드 파스텔 그라데이션
  - 버튼 색상 파스텔톤으로 조정
    - 기록 추가 버튼: 밝은 초록색
    - 인물 선택 버튼: 밝은 핑크-보라색
  - 히어로 섹션 배경 색상 부드럽게 변경
  - 다크모드 대응 색상 추가 (투명도 조절)
- **인덱스 페이지 장식 원형 개선** ✅
  - 문제: 가운데 보라색 원이 글자를 가리고, 모바일에서 더 심각함
  - 해결 방법:
    - [x] 보라색 원의 투명도를 더 낮춤 (0.7 → 0.4)
    - [x] 위치를 더 아래로 조정하여 글자와 겹치지 않게 함 (-bottom-8 → -bottom-32)
    - [x] 모바일에서 원형 크기 축소 (w-72 h-72 → w-48 h-48)
    - [x] 모바일에서 원형 위치 재배치 (반응형 클래스 적용)
    - [x] 애니메이션 범위 축소로 글자 영역 침범 방지 (새로운 animate-blob-gentle 클래스 생성)
  - 구현 내용:
    - HomePage.tsx 수정: 장식 원형들의 클래스 및 위치 조정
    - globals.css 수정: animate-blob-gentle 애니메이션 추가 (움직임 50% 감소)
    - 색감과 그라데이션은 그대로 유지하면서 사용성 개선
- **번역 시스템 버그 수정**
  - MemoriesPage에서 언어 변환이 작동하지 않던 문제 해결
  - 번역 파일들의 memories 섹션을 플랫 구조에서 중첩 객체 구조로 변경
  - ko.ts, en.ts, th.ts 파일의 memories 관련 키들을 객체 형태로 재구성
  - 예: `memories_title` → `memories: { title: ... }`
  - LanguageContext의 t 함수가 중첩된 키(예: 'memories.title')를 처리하도록 개선
  - 이제 MemoriesPage에서 한국어/영어/태국어 전환이 정상 작동함
- **나이 표시 형식 개선**
  - MemoriesPage의 나이별 필터에서 언어별로 다른 형식 적용
  - 한국어: "1세", "2세", "3세"...
  - 영어: "1 year old", "2 years old", "3 years old"...
  - 태국어: "1 ปี", "2 ปี", "3 ปี"...
  - useLanguage 훅의 language 값을 사용하여 현재 언어 감지
- **레거시 파일 정리 실패 및 복구**
  - 레거시 CSS/JS 파일들을 삭제했으나 페이지가 깨짐
  - git revert로 파일들 복구
  - 프로덕션 배포 시 CSS 로드 문제 발생
  - 프로덕션 사이트(minhominah.com)는 정상 작동 확인
  - 브라우저 캐시 클리어로 문제 해결
- **개발 서버 정리**
  - 3000, 3001 포트에서 중복 실행되던 서버 정리
  - 모든 기존 프로세스 종료 후 3000 포트에서만 재실행
  - localhost:3000 정상 작동 확인
- **메모리 페이지 드롭다운 메뉴 버그 수정**
  - /memories 페이지에서 점점점(더보기) 메뉴 클릭 시 수정/삭제 버튼이 나타나지 않는 문제 해결
  - 외부 클릭 핸들러가 버튼 클릭도 감지하여 메뉴를 즉시 닫는 문제 수정
  - 드롭다운 버튼에 `dropdown-button` 클래스 추가
  - 외부 클릭 핸들러에 드롭다운 버튼 예외 처리 추가
  - 이벤트 버블링 방지를 위해 e.stopPropagation() 추가
  - 드롭다운 메뉴 z-index를 z-20으로 높여 다른 요소 위에 표시되도록 수정
  - 수정/삭제 버튼 클릭 후 드롭다운 메뉴가 자동으로 닫히도록 개선
- **메모리 삭제 오류 수정**
  - 삭제 시 400 에러 발생 문제 해결
  - 원인 1: RLS 정책은 `created_by` 컬럼을 확인하지만 코드는 `user_id`를 사용
    - Memory 인터페이스에 `created_by` 필드 추가 ✓
    - 삭제 mutation에서 `user_id` 조건 제거 (RLS가 자동으로 처리) ✓
    - 드롭다운 표시 조건을 `user_id` 대신 `created_by` 사용으로 변경 ✓
  - 원인 2: 현재 사용자 역할이 'viewer'로 되어 있어 삭제 권한 없음
    - 권한 오류 시 명확한 메시지 표시 추가 ✓
    - 한국어/영어/태국어 번역 추가 ✓
    - `database-fix-memories-delete-policy.sql` 파일 생성 ✓
    - `docs/FIX_MEMORY_DELETE_ERROR.md` 가이드 문서 생성 ✓
  - **해결 방법**: Supabase 대시보드에서 사용자 역할을 'parent'로 변경 필요
- **관리자 페이지 프로필 편집 기능 추가**
  - "이름 없음"으로 표시되는 사용자 정보 문제 해결
  - 프로필 편집 모달 추가 (이메일, 이름, 사용자명 입력)
  - 이메일 정보 표시를 위한 RPC 함수 SQL 생성
  - 프로필 업데이트 mutation 구현
  - `database-get-users-with-email-rpc.sql` 파일 생성
  - **필요 작업**: Supabase 대시보드에서 RPC 함수 생성 필요
- **관리자 페이지 다국어 지원 추가** ✓
  - AdminPage 컴포넌트에 언어 변환 시스템 적용
  - 한국어, 영어, 태국어 번역 추가
  - admin 섹션 번역 키 추가 (사용자 관리, 활동 로그, 권한 관련)
  - 모든 하드코딩된 텍스트를 번역 키로 교체
  - 날짜 형식을 언어별로 다르게 적용
  - 프로필 편집 모달 다국어 지원
  - 빈 활동 로그 상태 메시지 추가
- **포토북 만들기 페이지 UI 개선** ✓
  - /upload 페이지와 유사한 전체 너비 레이아웃 적용
  - 히어로 섹션 보라색 그라데이션으로 통일
  - 카드 컨테이너 max-width 축소 (4xl)로 중앙 집중 레이아웃
  - 템플릿 선택 UI 개선 (높이 축소, 선택 시 배경색 추가)
  - 날짜 입력 필드 스타일 개선
  - 체크박스 옵션에 호버 효과 추가
  - 인물 필터를 라디오 버튼 스타일로 변경
  - 액션 버튼 색상 보라색 테마로 통일
  - 전체적인 다크모드 지원 개선
- **다크모드 개선 작업**
  - 단계 1: DarkModeContext 생성 ✓
    - 다크모드 상태를 전역적으로 관리하는 Context 생성
    - Layout의 로컬 상태를 Context로 이동
    - App.tsx에 DarkModeProvider 추가
  - 단계 2: CSS 변수 기반 색상 시스템 구축 ✓
    - globals.css에 라이트/다크 모드 CSS 변수 정의
    - 배경색, 텍스트색, 카드색, 테두리색 등 체계적 정의
    - 다크모드용 유틸리티 클래스 생성
  - 단계 3: HomePage 다크모드 스타일 적용 ✓
    - 히어로 섹션: 다크모드 오버레이 및 장식 요소 투명도 조정
    - 통계 섹션: 카드 배경색 및 아이콘 색상 다크모드 대응
    - 아이들 소개 섹션: 그라데이션 조정 및 텍스트 색상 대응
    - 최근 추억 섹션: 카드 및 플레이스홀더 다크모드 스타일
    - 하단 CTA 섹션: 그라데이션 배경 다크모드 조정
    - **그라데이션 텍스트 수정**: "민호와 민아의" 텍스트가 다크모드에서 보이지 않는 문제 해결
      - 다크모드: 흰색 텍스트로 표시
      - 라이트모드: 핑크-블루 그라데이션 유지
- **vite 의존성 에러 수정** ✓
  - `/legacy/html/backup.html`에서 `backup-system.js`를 찾을 수 없는 에러 해결
  - 임시로 빈 `backup-system.js` 파일 생성
  - `vite.config.ts`에 legacy 폴더 제외 설정 추가
    - fs.deny에 `**/legacy/**` 추가
    - optimizeDeps.exclude에 'legacy' 추가
  - vite가 legacy 폴더의 파일들을 스캔하지 않도록 설정
  - `_backup/20250715_125503/` 폴더에도 같은 에러 발생
    - 해당 폴더에도 빈 `backup-system.js` 파일 생성
    - vite 설정에 `_backup` 폴더도 제외 추가
- **메모리 삭제 권한 오류 수정** ✓
  - Memory 인터페이스에 `created_by` 필드 추가
  - 권한 체크 로직을 `user?.id === memory.user_id`에서 `user?.id && memory.created_by === user.id`로 변경
  - 삭제 mutation에서 `.eq('user_id', user.id)` 조건 제거 (RLS가 자동으로 처리)
  - 권한 오류 메시지 번역 키가 이미 모든 언어 파일에 존재함 확인
- **업로드 페이지 태그/인물 선택 UI 개선** (2025-01-17) ✓
  - 현재 상태: 토글 방식 (클릭하면 선택/해제)
  - 개선 방향: 방법 2 채택 - 별도의 선택된 항목 표시 영역 (칩 스타일)
    - 선택된 항목을 상단에 칩 형태로 표시
    - 각 칩에 X 버튼으로 개별 삭제 가능
    - 선택 가능한 항목은 하단에 별도 표시
    - 더 직관적이고 실수 방지 가능한 UX
  - [x] 인물 선택 UI 개선
    - 선택된 인물은 상단 보라색 배경 영역에 칩으로 표시
    - 민호: 파란색 그라데이션 칩
    - 민아: 분홍색 그라데이션 칩
    - 기타: 초록색 그라데이션 칩
    - 각 칩에 X 버튼으로 개별 삭제 가능
    - 이미 선택된 인물은 회색으로 비활성화
  - [x] 태그 선택 UI 개선
    - 선택된 태그는 상단 보라색 배경 영역에 칩으로 표시
    - 모든 태그는 보라색 그라데이션 칩
    - 각 칩에 X 버튼으로 개별 삭제 가능
    - 이미 선택된 태그는 회색으로 비활성화
- **태그 관리 기능 추가** (2025-01-17) ✓
  - 현재 상황: 태그 추가만 가능, 삭제/편집 불가
  - 사용자 요구: 잘못 등록한 태그(예: ##유치원) 삭제 기능 필요
  - 구현 완료:
    - [x] 관리자 페이지에 태그 관리 탭 추가
    - [x] 태그별 사용 중인 메모리 개수 표시
    - [x] 미사용 태그는 즉시 삭제 가능
    - [x] 사용 중인 태그는 경고 후 삭제
    - [x] 인물 관리 탭도 함께 추가
    - [x] 한국어/영어/태국어 번역 완료
  - 기능 설명:
    - 관리자 페이지에서 "태그 관리" 탭 접근
    - 각 태그의 사용 횟수 확인 가능
    - 삭제 시 사용 중인 메모리 개수 경고
    - 인물 관리도 동일한 방식으로 작동
- **로그인 페이지 번역 시스템 적용** ✅ (2025-01-21)
  - 문제: LoginPage가 번역 시스템에 연동되지 않아 한국어만 표시
  - 해결:
    - [x] LoginPage.tsx에 useLanguage 훅 추가
    - [x] 모든 하드코딩된 텍스트를 번역 키로 변경
    - [x] login 섹션 번역 키 추가 (한국어, 영어, 태국어)
    - [x] nav_login 번역 키 추가 (Layout.tsx에서 사용)
    - [x] 에러 메시지, 성공 메시지, 레이블, 버튼 텍스트 모두 번역
  - 결과: 
    - /login 페이지에서 언어 변환이 정상 작동
    - 네비게이션 바의 로그인 버튼도 각 언어로 표시됨